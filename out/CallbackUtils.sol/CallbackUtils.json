{"abi":[],"bytecode":{"object":"0x60808060405234601757603a9081601d823930815050f35b600080fdfe600080fdfea26469706673582212207ecfd2e5b9e73fc073c45e9240aac7d0fd9b4ccbdd6ff52dfa38d7fc6e469a0364736f6c63430008170033","sourceMap":"2547:1747:100:-:0;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x600080fdfea26469706673582212207ecfd2e5b9e73fc073c45e9240aac7d0fd9b4ccbdd6ff52dfa38d7fc6e469a0364736f6c63430008170033","sourceMap":"2547:1747:100:-:0;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"details\":\"## Problem Statement When calling an untrusted external callback (or hook), gas limit is usually provided to prevent grief attack from them. However, such gas limits are nested. From the callback invoking site, one might need to differentiate the cases between the outer-layer induced out-of-gas vs. the callback resulted out-of-gas. This library solves such challenge by safely marking the second case with an explicit flag of insufficient-callback-gas-provided. In order to use this library, one must first understand the concept of callback gas limit zones. ## Definitions: callback gas limit zones +---------------------------+--------------+---------------------+ | insufficient-callback-gas | transitional | out-of-callback-gas | +---------------------------+--------------+---------------------+ - insufficient-callback-gas zone   This zone includes all outer gas limits that are below callback gas limit. The invariance of   this zone is that calling the callback shall return with the insufficient-callback-gas-provided   set to true if more gas is needed to execute the callback. - out-of-callback-gas zone   Within this continuous zone, the invariance is that calling the callback shall never return   with the insufficient-callback-gas-provided flag set to true. - transitional zone   Between the insufficient-callback-gas zone to the out-of-callback-gas zone, there is a zone of   unspecified size where insufficient-callback-gas-provided may be set to true. This is due the   factors of EIP-150 Magic N and callback setup overhead. ## EIP-150 Magic N \\\"If a call asks for more gas than the maximum allowed amount (i.e. the total amount of gas remaining in the parent after subtracting the gas cost of the call and memory expansion), do not return an OOG error; instead, if a call asks for more gas than all but one 64th of the maximum allowed amount, call with all but one 64th of the maximum allowed amount of gas (this is equivalent to a version of EIP-90 plus EIP-114). CREATE only provides all but one 64th of the parent gas to the child call.\\\" Another article about this topic: https://medium.com/%40wighawag/ethereum-the-concept-of-gas-and-its-dangers-28d0eb809bb2\",\"kind\":\"dev\",\"methods\":{},\"title\":\"Callback utilities solidity library\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"An internal library used to handle different types of out of gas errors in callbacks\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"lib/superfluid-protocol-monorepo/packages/ethereum-contracts/contracts/libs/CallbackUtils.sol\":\"CallbackUtils\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/\",\":@superfluid-finance/=lib/superfluid-protocol-monorepo/packages/\",\":ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":superfluid-protocol-monorepo/=lib/superfluid-protocol-monorepo/packages/solidity-semantic-money/src/\"],\"viaIR\":true},\"sources\":{\"lib/superfluid-protocol-monorepo/packages/ethereum-contracts/contracts/libs/CallbackUtils.sol\":{\"keccak256\":\"0xe66712db6f0c543b58d96f346beb125faee3ea0068b83ec66fe5e38538b87a3a\",\"license\":\"AGPLv3\",\"urls\":[\"bzz-raw://c952691de2d1783452aa41a1caf4f7020bab9546875140d81b85e3a044e67136\",\"dweb:/ipfs/QmWq5tg3gGNWUQca6NkkgwACHQQQ2FocrvPxeYaCqrNhHy\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.23+commit.f704f362"},"language":"Solidity","output":{"abi":[],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/","@superfluid-finance/=lib/superfluid-protocol-monorepo/packages/","ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/openzeppelin-contracts/contracts/","superfluid-protocol-monorepo/=lib/superfluid-protocol-monorepo/packages/solidity-semantic-money/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"lib/superfluid-protocol-monorepo/packages/ethereum-contracts/contracts/libs/CallbackUtils.sol":"CallbackUtils"},"evmVersion":"paris","libraries":{},"viaIR":true},"sources":{"lib/superfluid-protocol-monorepo/packages/ethereum-contracts/contracts/libs/CallbackUtils.sol":{"keccak256":"0xe66712db6f0c543b58d96f346beb125faee3ea0068b83ec66fe5e38538b87a3a","urls":["bzz-raw://c952691de2d1783452aa41a1caf4f7020bab9546875140d81b85e3a044e67136","dweb:/ipfs/QmWq5tg3gGNWUQca6NkkgwACHQQQ2FocrvPxeYaCqrNhHy"],"license":"AGPLv3"}},"version":1},"ast":{"absolutePath":"lib/superfluid-protocol-monorepo/packages/ethereum-contracts/contracts/libs/CallbackUtils.sol","id":70172,"exportedSymbols":{"CallbackUtils":[70171]},"nodeType":"SourceUnit","src":"35:4260:100","nodes":[{"id":70057,"nodeType":"PragmaDirective","src":"35:24:100","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":70171,"nodeType":"ContractDefinition","src":"2547:1747:100","nodes":[{"id":70062,"nodeType":"VariableDeclaration","src":"2621:45:100","nodes":[],"constant":true,"documentation":{"id":70059,"nodeType":"StructuredDocumentation","src":"2575:41:100","text":"The magic N constant from the EIP-150"},"mutability":"constant","name":"EIP150_MAGIC_N","nameLocation":"2647:14:100","scope":70171,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70060,"name":"uint256","nodeType":"ElementaryTypeName","src":"2621:7:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3634","id":70061,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2664:2:100","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"visibility":"internal"},{"id":70113,"nodeType":"FunctionDefinition","src":"2734:531:100","nodes":[],"body":{"id":70112,"nodeType":"Block","src":"2930:335:100","nodes":[],"statements":[{"assignments":[70079],"declarations":[{"constant":false,"id":70079,"mutability":"mutable","name":"gasLeftBefore","nameLocation":"2948:13:100","nodeType":"VariableDeclaration","scope":70112,"src":"2940:21:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70078,"name":"uint256","nodeType":"ElementaryTypeName","src":"2940:7:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70082,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":70080,"name":"gasleft","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-7,"src":"2964:7:100","typeDescriptions":{"typeIdentifier":"t_function_gasleft_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":70081,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2964:9:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2940:33:100"},{"expression":{"id":70095,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":70083,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70072,"src":"3043:7:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"id":70084,"name":"returnedData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70076,"src":"3052:12:100","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"id":70085,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"3042:23:100","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_bytes_memory_ptr_$","typeString":"tuple(bool,bytes memory)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":70093,"name":"callData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70067,"src":"3114:8:100","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"expression":{"arguments":[{"id":70088,"name":"target","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70065,"src":"3076:6:100","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":70087,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3068:7:100","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":70086,"name":"address","nodeType":"ElementaryTypeName","src":"3068:7:100","typeDescriptions":{}}},"id":70089,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3068:15:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":70090,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3084:4:100","memberName":"call","nodeType":"MemberAccess","src":"3068:20:100","typeDescriptions":{"typeIdentifier":"t_function_barecall_payable$_t_bytes_memory_ptr_$returns$_t_bool_$_t_bytes_memory_ptr_$","typeString":"function (bytes memory) payable returns (bool,bytes memory)"}},"id":70092,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"names":["gas"],"nodeType":"FunctionCallOptions","options":[{"id":70091,"name":"callbackGasLimit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70069,"src":"3095:16:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"src":"3068:45:100","typeDescriptions":{"typeIdentifier":"t_function_barecall_payable$_t_bytes_memory_ptr_$returns$_t_bool_$_t_bytes_memory_ptr_$gas","typeString":"function (bytes memory) payable returns (bool,bytes memory)"}},"id":70094,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3068:55:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_bytes_memory_ptr_$","typeString":"tuple(bool,bytes memory)"}},"src":"3042:81:100","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":70096,"nodeType":"ExpressionStatement","src":"3042:81:100"},{"condition":{"id":70098,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"3137:8:100","subExpression":{"id":70097,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70072,"src":"3138:7:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70111,"nodeType":"IfStatement","src":"3133:126:100","trueBody":{"id":70110,"nodeType":"Block","src":"3147:112:100","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70104,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[],"expression":{"argumentTypes":[],"id":70099,"name":"gasleft","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-7,"src":"3165:7:100","typeDescriptions":{"typeIdentifier":"t_function_gasleft_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":70100,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3165:9:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70103,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70101,"name":"gasLeftBefore","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70079,"src":"3178:13:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":70102,"name":"EIP150_MAGIC_N","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70062,"src":"3194:14:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3178:30:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3165:43:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70109,"nodeType":"IfStatement","src":"3161:87:100","trueBody":{"expression":{"id":70107,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70105,"name":"insufficientCallbackGasProvided","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70074,"src":"3210:31:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":70106,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3244:4:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"3210:38:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70108,"nodeType":"ExpressionStatement","src":"3210:38:100"}}]}}]},"documentation":{"id":70063,"nodeType":"StructuredDocumentation","src":"2673:56:100","text":"Make a call to the target with a callback gas limit."},"implemented":true,"kind":"function","modifiers":[],"name":"externalCall","nameLocation":"2743:12:100","parameters":{"id":70070,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70065,"mutability":"mutable","name":"target","nameLocation":"2764:6:100","nodeType":"VariableDeclaration","scope":70113,"src":"2756:14:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":70064,"name":"address","nodeType":"ElementaryTypeName","src":"2756:7:100","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":70067,"mutability":"mutable","name":"callData","nameLocation":"2785:8:100","nodeType":"VariableDeclaration","scope":70113,"src":"2772:21:100","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":70066,"name":"bytes","nodeType":"ElementaryTypeName","src":"2772:5:100","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":70069,"mutability":"mutable","name":"callbackGasLimit","nameLocation":"2803:16:100","nodeType":"VariableDeclaration","scope":70113,"src":"2795:24:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70068,"name":"uint256","nodeType":"ElementaryTypeName","src":"2795:7:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2755:65:100"},"returnParameters":{"id":70077,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70072,"mutability":"mutable","name":"success","nameLocation":"2852:7:100","nodeType":"VariableDeclaration","scope":70113,"src":"2847:12:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":70071,"name":"bool","nodeType":"ElementaryTypeName","src":"2847:4:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":70074,"mutability":"mutable","name":"insufficientCallbackGasProvided","nameLocation":"2866:31:100","nodeType":"VariableDeclaration","scope":70113,"src":"2861:36:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":70073,"name":"bool","nodeType":"ElementaryTypeName","src":"2861:4:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":70076,"mutability":"mutable","name":"returnedData","nameLocation":"2912:12:100","nodeType":"VariableDeclaration","scope":70113,"src":"2899:25:100","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":70075,"name":"bytes","nodeType":"ElementaryTypeName","src":"2899:5:100","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"2846:79:100"},"scope":70171,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":70164,"nodeType":"FunctionDefinition","src":"3338:540:100","nodes":[],"body":{"id":70163,"nodeType":"Block","src":"3537:341:100","nodes":[],"statements":[{"assignments":[70130],"declarations":[{"constant":false,"id":70130,"mutability":"mutable","name":"gasLeftBefore","nameLocation":"3555:13:100","nodeType":"VariableDeclaration","scope":70163,"src":"3547:21:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70129,"name":"uint256","nodeType":"ElementaryTypeName","src":"3547:7:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70133,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":70131,"name":"gasleft","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-7,"src":"3571:7:100","typeDescriptions":{"typeIdentifier":"t_function_gasleft_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":70132,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3571:9:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3547:33:100"},{"expression":{"id":70146,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":70134,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70123,"src":"3650:7:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"id":70135,"name":"returnedData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70127,"src":"3659:12:100","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"id":70136,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"3649:23:100","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_bytes_memory_ptr_$","typeString":"tuple(bool,bytes memory)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":70144,"name":"callData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70118,"src":"3727:8:100","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"expression":{"arguments":[{"id":70139,"name":"target","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70116,"src":"3683:6:100","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":70138,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3675:7:100","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":70137,"name":"address","nodeType":"ElementaryTypeName","src":"3675:7:100","typeDescriptions":{}}},"id":70140,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3675:15:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":70141,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3691:10:100","memberName":"staticcall","nodeType":"MemberAccess","src":"3675:26:100","typeDescriptions":{"typeIdentifier":"t_function_barestaticcall_view$_t_bytes_memory_ptr_$returns$_t_bool_$_t_bytes_memory_ptr_$","typeString":"function (bytes memory) view returns (bool,bytes memory)"}},"id":70143,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"names":["gas"],"nodeType":"FunctionCallOptions","options":[{"id":70142,"name":"callbackGasLimit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70120,"src":"3708:16:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"src":"3675:51:100","typeDescriptions":{"typeIdentifier":"t_function_barestaticcall_view$_t_bytes_memory_ptr_$returns$_t_bool_$_t_bytes_memory_ptr_$gas","typeString":"function (bytes memory) view returns (bool,bytes memory)"}},"id":70145,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3675:61:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_bytes_memory_ptr_$","typeString":"tuple(bool,bytes memory)"}},"src":"3649:87:100","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":70147,"nodeType":"ExpressionStatement","src":"3649:87:100"},{"condition":{"id":70149,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"3750:8:100","subExpression":{"id":70148,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70123,"src":"3751:7:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70162,"nodeType":"IfStatement","src":"3746:126:100","trueBody":{"id":70161,"nodeType":"Block","src":"3760:112:100","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70155,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[],"expression":{"argumentTypes":[],"id":70150,"name":"gasleft","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-7,"src":"3778:7:100","typeDescriptions":{"typeIdentifier":"t_function_gasleft_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":70151,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3778:9:100","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70154,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70152,"name":"gasLeftBefore","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70130,"src":"3791:13:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":70153,"name":"EIP150_MAGIC_N","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70062,"src":"3807:14:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3791:30:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3778:43:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70160,"nodeType":"IfStatement","src":"3774:87:100","trueBody":{"expression":{"id":70158,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70156,"name":"insufficientCallbackGasProvided","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70125,"src":"3823:31:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":70157,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3857:4:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"3823:38:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70159,"nodeType":"ExpressionStatement","src":"3823:38:100"}}]}}]},"documentation":{"id":70114,"nodeType":"StructuredDocumentation","src":"3271:62:100","text":"Make a staticcall to the target with a callback gas limit."},"implemented":true,"kind":"function","modifiers":[],"name":"staticCall","nameLocation":"3347:10:100","parameters":{"id":70121,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70116,"mutability":"mutable","name":"target","nameLocation":"3366:6:100","nodeType":"VariableDeclaration","scope":70164,"src":"3358:14:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":70115,"name":"address","nodeType":"ElementaryTypeName","src":"3358:7:100","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":70118,"mutability":"mutable","name":"callData","nameLocation":"3387:8:100","nodeType":"VariableDeclaration","scope":70164,"src":"3374:21:100","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":70117,"name":"bytes","nodeType":"ElementaryTypeName","src":"3374:5:100","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":70120,"mutability":"mutable","name":"callbackGasLimit","nameLocation":"3405:16:100","nodeType":"VariableDeclaration","scope":70164,"src":"3397:24:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70119,"name":"uint256","nodeType":"ElementaryTypeName","src":"3397:7:100","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3357:65:100"},"returnParameters":{"id":70128,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70123,"mutability":"mutable","name":"success","nameLocation":"3459:7:100","nodeType":"VariableDeclaration","scope":70164,"src":"3454:12:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":70122,"name":"bool","nodeType":"ElementaryTypeName","src":"3454:4:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":70125,"mutability":"mutable","name":"insufficientCallbackGasProvided","nameLocation":"3473:31:100","nodeType":"VariableDeclaration","scope":70164,"src":"3468:36:100","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":70124,"name":"bool","nodeType":"ElementaryTypeName","src":"3468:4:100","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":70127,"mutability":"mutable","name":"returnedData","nameLocation":"3519:12:100","nodeType":"VariableDeclaration","scope":70164,"src":"3506:25:100","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":70126,"name":"bytes","nodeType":"ElementaryTypeName","src":"3506:5:100","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"3453:79:100"},"scope":70171,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":70170,"nodeType":"FunctionDefinition","src":"3928:364:100","nodes":[],"body":{"id":70169,"nodeType":"Block","src":"3967:325:100","nodes":[],"statements":[{"AST":{"nativeSrc":"4273:13:100","nodeType":"YulBlock","src":"4273:13:100","statements":[{"expression":{"arguments":[],"functionName":{"name":"invalid","nativeSrc":"4275:7:100","nodeType":"YulIdentifier","src":"4275:7:100"},"nativeSrc":"4275:9:100","nodeType":"YulFunctionCall","src":"4275:9:100"},"nativeSrc":"4275:9:100","nodeType":"YulExpressionStatement","src":"4275:9:100"}]},"evmVersion":"paris","externalReferences":[],"id":70168,"nodeType":"InlineAssembly","src":"4264:22:100"}]},"documentation":{"id":70165,"nodeType":"StructuredDocumentation","src":"3884:39:100","text":"Reliably consume all the gas given."},"implemented":true,"kind":"function","modifiers":[],"name":"consumeAllGas","nameLocation":"3937:13:100","parameters":{"id":70166,"nodeType":"ParameterList","parameters":[],"src":"3950:2:100"},"returnParameters":{"id":70167,"nodeType":"ParameterList","parameters":[],"src":"3967:0:100"},"scope":70171,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"CallbackUtils","contractDependencies":[],"contractKind":"library","documentation":{"id":70058,"nodeType":"StructuredDocumentation","src":"61:2485:100","text":" @title Callback utilities solidity library\n @notice An internal library used to handle different types of out of gas errors in callbacks\n @dev\n ## Problem Statement\n When calling an untrusted external callback (or hook), gas limit is usually provided to prevent\n grief attack from them. However, such gas limits are nested. From the callback invoking site, one\n might need to differentiate the cases between the outer-layer induced out-of-gas vs. the callback\n resulted out-of-gas.\n This library solves such challenge by safely marking the second case with an explicit flag of\n insufficient-callback-gas-provided. In order to use this library, one must first understand the\n concept of callback gas limit zones.\n ## Definitions: callback gas limit zones\n +---------------------------+--------------+---------------------+\n | insufficient-callback-gas | transitional | out-of-callback-gas |\n +---------------------------+--------------+---------------------+\n - insufficient-callback-gas zone\n   This zone includes all outer gas limits that are below callback gas limit. The invariance of\n   this zone is that calling the callback shall return with the insufficient-callback-gas-provided\n   set to true if more gas is needed to execute the callback.\n - out-of-callback-gas zone\n   Within this continuous zone, the invariance is that calling the callback shall never return\n   with the insufficient-callback-gas-provided flag set to true.\n - transitional zone\n   Between the insufficient-callback-gas zone to the out-of-callback-gas zone, there is a zone of\n   unspecified size where insufficient-callback-gas-provided may be set to true. This is due the\n   factors of EIP-150 Magic N and callback setup overhead.\n ## EIP-150 Magic N\n \"If a call asks for more gas than the maximum allowed amount (i.e. the total amount of gas\n remaining in the parent after subtracting the gas cost of the call and memory expansion), do not\n return an OOG error; instead, if a call asks for more gas than all but one 64th of the maximum\n allowed amount, call with all but one 64th of the maximum allowed amount of gas (this is\n equivalent to a version of EIP-90 plus EIP-114). CREATE only provides all but one 64th of the\n parent gas to the child call.\"\n Another article about this topic:\n https://medium.com/%40wighawag/ethereum-the-concept-of-gas-and-its-dangers-28d0eb809bb2"},"fullyImplemented":true,"linearizedBaseContracts":[70171],"name":"CallbackUtils","nameLocation":"2555:13:100","scope":70172,"usedErrors":[],"usedEvents":[]}],"license":"AGPLv3"},"id":100}